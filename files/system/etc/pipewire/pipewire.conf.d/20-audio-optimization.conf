# PipeWire audio optimization for USB and Bluetooth devices
# Improves audio stability and prevents dropouts
# Optimized for USB audio devices like DECT headsets (Yealink WH62)

context.properties = {
    # Support multiple sample rates for various devices
    default.clock.allowed-rates = [ 44100 48000 88200 96000 ]

    # Optimize for USB audio latency
    default.clock.rate = 48000
    default.clock.quantum = 1024
    default.clock.min-quantum = 512
    default.clock.max-quantum = 2048
}

# USB and Bluetooth device settings
context.modules = [
    {   name = libpipewire-module-protocol-pulse
        args = {
            # Increased buffer for USB audio stability
            pulse.min.quantum = 1024/48000
            pulse.default.req = 1024/48000
            pulse.min.req = 512/48000
            pulse.max.req = 2048/48000
        }
    }
]
