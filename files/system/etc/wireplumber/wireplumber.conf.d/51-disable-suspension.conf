# Disable audio device suspension to prevent audio dropout
# This fixes issues where audio stops after periods of silence
# Applies to both USB audio devices (like DECT headsets) and Bluetooth

monitor.alsa.rules = [
  # Prevent all ALSA output devices (including USB audio) from suspending
  {
    matches = [
      {
        node.name = "~alsa_output.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0  # never suspend
        api.alsa.period-size   = 1024       # optimize for USB audio
        api.alsa.headroom      = 2048       # extra buffer for USB devices
      }
    }
  }

  # Also handle USB audio input devices (microphones, headsets)
  {
    matches = [
      {
        node.name = "~alsa_input.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
        api.alsa.period-size   = 1024
        api.alsa.headroom      = 2048
      }
    }
  }
]

# Prevent Bluetooth devices from suspending
monitor.bluez.rules = [
  {
    matches = [
      {
        device.name = "~bluez_card.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
      }
    }
  }
]
